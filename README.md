# FXdownloader 番茄小说下载器

FXdownloader 是一款基于开源项目优化重构的番茄小说下载工具，支持图形用户界面（GUI）和命令行两种操作模式，具备稳定的下载性能、完善的错误处理和友好的用户体验，帮助用户便捷获取番茄小说资源并导出为 TXT、EPUB 格式。

## 🚀 核心功能

1. **双模式操作**：支持 GUI 可视化界面（适合新手）和命令行高效操作（适合进阶用户），满足不同使用场景需求。
2. **多 API 适配**：兼容 fanqie_sdk、fqweb、qyuing、lsjk 多种 API 类型，自动切换保障下载稳定性。
3. **灵活下载控制**：支持章节范围选择，可按需下载指定区间章节，避免冗余内容。
4. **优质格式输出**：优化 EPUB 格式导出，完善封面处理，确保在各类阅读设备上的兼容性。
5. **稳定可靠**：添加全局线程锁保障日志输出有序，完善异常捕获机制，支持程序中断时的状态保存，降低下载失败风险。
6. **多线程批量下载**：满足你的看书需求~

## 📁 核心文件说明

| 文件名                   | 功能描述                                            |
| ------------------------ | --------------------------------------------------- |
| `enhanced_downloader.py` | 增强型下载器核心，支持 GUI 进度回调与多线程安全控制 |
| `tomato_novel_api.py`    | API 调用核心模块，处理各类接口适配与数据解析        |
| `gui.py`                 | 图形用户界面入口，提供可视化操作界面                |
| `updater.py`             | 自动更新模块，负责版本检测与更新包下载              |
| `version.py`             | 版本信息管理，记录当前软件版本号                    |
| `config.py`              | 配置文件，存储 API 参数、下载路径等核心设置         |

## 🛠️ 安装与依赖

### 依赖环境

- Python 3.8+

- 依赖库列表：

  ```plaintext
  requests
  bs4
  fake_useragent
  tqdm
  ebooklib
  PIL
  urllib3
  ```

  

### 安装方式

1. 克隆或下载本项目源码至本地

2. 进入项目目录，执行以下命令安装依赖：

   ```bash
   pip install -r requirements.txt
   ```

   ### 使用方式

   直接下载已发布版本即可使用。

## 📖 使用方法

### 1. 命令行模式（推荐进阶用户）

```bash
# 直接运行增强下载器（默认交互模式）
python enhanced_downloader.py

# 测试API连接可用性
python tomato_novel_api.py test

# 搜索小说（替换"小说名"为目标书名）
python tomato_novel_api.py search "小说名"

# 查询小说详情（替换"书籍ID"为搜索结果中的目标ID）
python tomato_novel_api.py novel_info "书籍ID"
```

### 2. GUI 模式（推荐新手用户）

直接运行 GUI 入口文件，即可打开可视化操作界面：

```bash
python gui.py
```

打开后按照界面提示输入小说名称 / ID、选择章节范围，点击下载即可。

## ⚠️ 重要注意事项

1. 若下载完成后打开小说仅显示最后一章，属于 API 接口偶发数据返回异常，**请多重试几次或换个时间再试**，软件会自动切换 API 通道重新获取完整章节数据。
2. 本工具仅用于个人学习与交流，请勿用于商业用途或下载版权受限内容，遵守相关法律法规和平台用户协议。
3. 依赖库安装失败时，可尝试逐个安装失败的依赖包，确保环境兼容性。
4. 源码来源[POf-L/Fanqie-novel-Downloader: 番茄小说下载器，持续更新，稳定可用](https://github.com/POf-L/Fanqie-novel-Downloader)支持原作者
